function handleScroll(){var windowHeight=window.innerHeight||800;var documentHeight=document.body.scrollHeight;var finalHeight=documentHeight-windowHeight;var scrollTop=document.scrollingElement.scrollTop;var scrollPercent=Math.ceil((scrollTop/finalHeight)*100);var scrollProgressIndicator=document.querySelector('.header-scroll-progress');scrollProgressIndicator.style.width=scrollPercent+'%';var headerMenu=document.querySelector('.header');var SMALL_HEADER_THRESHOLD=300;var nextClass=(scrollTop>SMALL_HEADER_THRESHOLD)?' header-small':'';headerMenu.setAttribute('class','header'+nextClass);}
if('scrollingElement'in document){window.addEventListener('scroll',handleScroll);window.addEventListener('load',handleScroll);}
document.querySelector("#header-toggle").addEventListener("click",function(evt){this.classList.toggle("active");});var footer=document.getElementById('footer');var footerToggler=document.getElementsByClassName('footer-toggle')[0];footerToggler.addEventListener('click',function(){footer.classList.toggle('expanded');});var feLang=document.querySelector('meta[name="DC.Language"]').getAttribute("content");if(feLang==='ru'){var facebookItem=document.querySelector('.iconny-facebook').parentNode.parentNode;facebookItem.innerHTML='<a href="https://vk.com/newyorker.fashion" target="_blank">'+
'<img class="nav-icon" src="/img/vk-footer.png" alt="vk"/></a>';}
function setAndTrackChangeEvents(newsletterForm){var emailField=newsletterForm.querySelector('input[name=email]');var birthdayDiscountField=newsletterForm.querySelector('input.agreed-birthday-discount');var birthdateField=newsletterForm.querySelector('input[name=birthdate]');var genderFields=newsletterForm.querySelectorAll('input[name=gender]');var legalFields=newsletterForm.querySelectorAll('.legal-agreements input[type=checkbox]');var submitButton=newsletterForm.querySelector('button[type=submit]');var formChangeTracker=function(){var email=emailField.value.match(/^(([^<>()\[\].,;:\s@"]+(\.[^<>()\[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i)?emailField.value:null;var birthdayDiscount=birthdayDiscountField.checked;var birthdate=birthdateField.value.match(/^\d{2}[./]\d{2}[./]\d{4}$/)?birthdateField.value:null;var gender=genderFields[0].checked?'f':(genderFields[1].checked?'m':'');var legalChecksDone=legalFields[0].checked&&legalFields[1].checked;var birthdayIsResolved=!birthdayDiscount||(birthdayDiscount&&birthdate);if(email&&birthdayIsResolved&&gender&&legalChecksDone){submitButton.removeAttribute('disabled');}else{submitButton.setAttribute('disabled','');}};emailField.addEventListener('keyup',formChangeTracker);emailField.addEventListener('change',formChangeTracker);birthdateField.addEventListener('keyup',formChangeTracker);birthdateField.addEventListener('change',formChangeTracker);birthdayDiscountField.addEventListener('change',formChangeTracker);for(var i=0;i<genderFields.length;i++){var genderField=genderFields[i];genderField.addEventListener('change',formChangeTracker);}
for(var j=0;j<legalFields.length;j++){var agreement=legalFields[j];agreement.addEventListener('change',formChangeTracker);}
newsletterForm.addEventListener('submit',submitNewsletterForm)}
function initNewsletter(){var allLinks=document.querySelectorAll('a[href*="newsletter"]');var overlay=document.getElementById('newsletter-overlay');var confirmationDialog=document.getElementById('newsletter-confirmation');for(var k=0;k<allLinks.length;k++){var link=allLinks[k];link.addEventListener('click',function(event){event.preventDefault();overlay.setAttribute('class','active');});}
var newsWindow=document.getElementById('newsletter-overlay');var closeButton=newsWindow.querySelector('button.close');overlay.addEventListener('click',function(event){if(event.target===overlay||event.target===closeButton){event.preventDefault();overlay.setAttribute('class','');confirmationDialog.setAttribute('class','');}});var newsletterForms=document.querySelectorAll('.newsletter-form');for(var i=0;i<newsletterForms.length;i++){var newsletterForm=newsletterForms[i];setAndTrackChangeEvents(newsletterForm);}}
function submitNewsletterForm(e){e.preventDefault();var url='https://api.newyorker.de/api/functions/registerForNewsletter';var form=this;var countryCode=form.elements.namedItem('country-code').value;var email=form.elements.namedItem('email').value;var gender=form.elements.namedItem('gender').value;if(!countryCode||!email||!gender){return false;}
var data={countryCode:countryCode,email:email,gender:gender};var birthdate=form.elements.namedItem('birthdate').value;if(birthdate){data.birthday=birthdate;}
fetch(url,{credentials:'omit',method:'POST',body:JSON.stringify(data),headers:{'X-Parse-Application-Id':'newYorkerApi','Content-Type':'application/json'}}).then(function(){document.querySelector('.newsletter').classList.add('confirmed');return false;});return false;}
initNewsletter();var MAIL_DOMAIN='newyorker.de';function convertAllEmailLinks(){var links=document.querySelectorAll('a[data-ny-mail-link]');for(var i=0;i<links.length;i++){var link=links[i];var mailto=link.innerText+'@'+MAIL_DOMAIN;link.setAttribute('href','mailto:'+mailto);link.innerText=mailto;}}
if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",convertAllEmailLinks);}else{convertAllEmailLinks();}
var translations={};var i18nUrl='https://api.newyorker.de/public/assets/i18n';var pageLanguage='de';function initTranslations(language,callback){pageLanguage=language;loadTranslations(language,function(translationJSON){if(translationJSON){callback(translationJSON);return;}
loadTranslations("en",callback);})}
function loadTranslations(country,callback){var oReq=new XMLHttpRequest();oReq.addEventListener("load",function(){try{translations=JSON.parse(this.responseText);callback(translations);}catch(err){console.warn("error while loading translations: ",err);callback(null);}});oReq.open("GET",i18nUrl+"/"+country+".json");oReq.send();}
function msg(key){var msg=translations[key];if(msg){return msg}
return key}
function webCatMsg(product){if(pageLanguage==='de'&&product.descriptions){for(var i=0;i<product.descriptions.length;i++){var description=product.descriptions[i];if(description.language==='DE'){return description.description}}}
var filterKey=product.web_category.trim().toLowerCase();filterKey=filterKey.replace(/ /g,'_');if(product.customer_group.toLowerCase()==='male'){return msg('webcat_haka_singular_'+filterKey)}else{return msg('webcat_singular_'+filterKey)}}
function formatPrice(price,currency){if(!price){price=0}
var priceStr=price.toString();if(pageLanguage!=="en"){priceStr=priceStr.replace(".",",")}
return priceStr+" "+formatCurrency(currency);}
function formatCurrency(currency){switch(currency){}
return currency}